<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ravi Kalia">
<meta name="dcterms.date" content="2024-04-22">

<title>Blog Directory - Git Repository Search</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Blog Directory</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/project-delphi"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i>
<span class="menu-text"></span></a>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/ravi-kalia-phd"> <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i>
<span class="menu-text"></span></a>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://project-delphi.github.io"> <i class="bi bi-house-fill" role="img" aria-label="LinkedIn">
</i>
<span class="menu-text"></span></a>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Git Repository Search</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">graphs</div>
                <div class="quarto-category">code</div>
                <div class="quarto-category">development</div>
                <div class="quarto-category">environment</div>
              </div>
                  </div>
  </div>


  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Ravi Kalia </p>
            </div>
    </div>

      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 22, 2024</p>
      </div>
    </div>


    </div>


  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>

  <ul class="collapse">
  <li><a href="#git-repo-search" id="toc-git-repo-search" class="nav-link active" data-scroll-target="#git-repo-search">Git Repo Search</a>
  <ul class="collapse">
  <li><a href="#filename-in-unix-like-directory" id="toc-filename-in-unix-like-directory" class="nav-link" data-scroll-target="#filename-in-unix-like-directory">Filename in “Unix-like” Directory</a></li>
  <li><a href="#string-in-unix-like-directory" id="toc-string-in-unix-like-directory" class="nav-link" data-scroll-target="#string-in-unix-like-directory">String in “Unix-like” Directory</a></li>
  <li><a href="#what-is-git" id="toc-what-is-git" class="nav-link" data-scroll-target="#what-is-git">What is Git</a></li>
  <li><a href="#filename-in-git-repository" id="toc-filename-in-git-repository" class="nav-link" data-scroll-target="#filename-in-git-repository">Filename in Git Repository</a></li>
  <li><a href="#string-in-file-contents-of-git-repository" id="toc-string-in-file-contents-of-git-repository" class="nav-link" data-scroll-target="#string-in-file-contents-of-git-repository">String in File Contents of Git Repository</a></li>
  <li><a href="#filter-git-commit-messages-for-author-date-and-string" id="toc-filter-git-commit-messages-for-author-date-and-string" class="nav-link" data-scroll-target="#filter-git-commit-messages-for-author-date-and-string">Filter Git Commit Messages for Author, Date and String</a></li>
  <li><a href="#git-grep-vs-grep" id="toc-git-grep-vs-grep" class="nav-link" data-scroll-target="#git-grep-vs-grep">Git Grep vs Grep</a></li>
  <li><a href="#takeaways" id="toc-takeaways" class="nav-link" data-scroll-target="#takeaways">Takeaways</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul class="collapse"><li><a href="https://github.dev/project-delphi/ml-blog/blob/main/posts/git-search/index.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="git-repo-search" class="level1">
<h1>Git Repo Search</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./git-search.jpg" class="img-fluid figure-img"></p>
<figcaption>“Robot Magnifying Glass Search”</figcaption>
</figure>
</div>
<p>Photo by <a href="https://unsplash.com/@growtika?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Growtika</a> on <a href="https://unsplash.com/photos/a-white-robot-holding-a-magnifying-glass-g5kpSCf3dOs?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Unsplash</a></p>
<p>There are many ways to search a repository, particularly a Git Repo. We will outline some use cases with examples for a “Unix-like” file directory and also a Git Repo.</p>
<p>Let’s do this for a library I’ve been looking at.</p>
<p>Some unit tests break on Apple Silicon for the open source library <a href="pyg.org">pyg</a>. The maintainer disabled some tests. I want to find them. It has something to do with PyTorch not fully supporting compressed sparse tensor representations on Apple’s <code>mps</code> framework for Apple Silicon. I received the following note:</p>
<blockquote class="blockquote">
<p>there are a few tests that were disabled around <code>test_sparse</code></p>
</blockquote>
<p>and</p>
<blockquote class="blockquote">
<p>the <code>convert_coo_to_csr_indices</code> doesn’t seem to be supported.</p>
</blockquote>
<p>It’s likely that test_sparse and convert_coo_to_csr_indices are variable names or tokens inside a code file of the git repository. However, for illustration, we will assume that they could be anywhere in the git repo (filenames, directory names, commit messages, variable names, past commits, current directory).</p>
<p>The objective is to find (and then later fix bugs) related to these strings. So find the strings in filenames and/or inside contents of filenames (line numbers of specific files), checking through commit history for occurences of the strings.</p>
<p>Time to search. The repo can be cloned locally from <a href="https://github.com/pyg-team/pytorch_geometric/">here</a> and then cd into it.</p>
<div id="cell-3" class="cell" data-execution_count="157">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>os.chdir(<span class="st">"/Users/ravikalia/Code/github.com/ml-blog/posts/git-search/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-4" class="cell" data-execution_count="158">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(os.getcwd())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>/Users/ravikalia/Code/github.com/ml-blog/posts/git-search</code></pre>
</div>
</div>
<div id="cell-5" class="cell" data-execution_count="159">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> [ <span class="op">-</span>d <span class="st">"pytorch_geometric"</span> ]<span class="op">;</span> then</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    rm <span class="op">-</span>rf pytorch_geometric</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>fi</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>git clone https:<span class="op">//</span>github.com<span class="op">/</span>pyg<span class="op">-</span>team<span class="op">/</span>pytorch_geometric.git</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>git <span class="op">-</span>C pytorch_geometric fetch <span class="op">--</span><span class="bu">all</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Cloning into 'pytorch_geometric'...</code></pre>
</div>
</div>
<p>Let’s change the directory to the root of the cloned repo, which makes searching easier</p>
<div id="cell-7" class="cell" data-execution_count="160">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>os.chdir(<span class="st">"./pytorch_geometric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="filename-in-unix-like-directory" class="level2">
<h2 class="anchored" data-anchor-id="filename-in-unix-like-directory">Filename in “Unix-like” Directory</h2>
<p>We can look for the string <code>test_sparse</code> in filenames using the shell command line tool <code>find</code>.</p>
<div id="cell-9" class="cell" data-execution_count="161">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>find . <span class="op">-</span>name <span class="st">"*test_sparse*"</span> <span class="op">-</span>o <span class="op">-</span>name <span class="st">"*convert_coo_to_csr_indices*"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>./test/utils/test_sparse.py</code></pre>
</div>
</div>
<p>great, so we have a file to look at. Let’s look at the file <code>test_sparse.py</code>. It seems to be unit tests related to sparsity, possibly testing utility functions for converting between sparse tensor representations.</p>
</section>
<section id="string-in-unix-like-directory" class="level2">
<h2 class="anchored" data-anchor-id="string-in-unix-like-directory">String in “Unix-like” Directory</h2>
<p>String search is a bit more complicated. <code>grep</code> is an awesome tool for this.</p>
<div id="cell-12" class="cell" data-execution_count="162">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>grep <span class="op">-</span>rn . <span class="op">-</span>e <span class="st">"test_sparse"</span> <span class="op">-</span>e <span class="st">"convert_coo_to_csr_indices"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>./test/utils/test_cross_entropy.py:9:def test_sparse_cross_entropy_multiclass(with_edge_label_weight):
./test/utils/test_cross_entropy.py:32:def test_sparse_cross_entropy_multilabel(with_edge_label_weight):
./test/test_edge_index.py:102:def test_sparse_tensor(dtype, device):
./test/test_edge_index.py:992:def test_sparse_narrow(device):
./test/test_edge_index.py:1026:def test_sparse_resize(device):
./torch_geometric/testing/asserts.py:24:    test_sparse_layouts: Optional[List[Union[str, torch.layout]]] = None,
./torch_geometric/testing/asserts.py:49:        test_sparse_layouts (List[str or int], optional): The sparse layouts to
./torch_geometric/testing/asserts.py:62:    if test_sparse_layouts is None:
./torch_geometric/testing/asserts.py:63:        test_sparse_layouts = SPARSE_LAYOUTS
./torch_geometric/testing/asserts.py:74:    if len(test_sparse_layouts) &gt; 0 and sparse_size is None:
./torch_geometric/testing/asserts.py:75:        raise ValueError(f"Got sparse layouts {test_sparse_layouts}, but no "
./torch_geometric/testing/asserts.py:93:    for layout in (test_sparse_layouts or []):
Binary file ./.git/index matches</code></pre>
</div>
</div>
<p>Many locations matched to 3 files. It’s possible they aren’t all relevant for testing purpose. The <code>.git/index</code> is a binary file, which is used by git to store information about the repository, it’s not relevant for our task.</p>
</section>
<section id="what-is-git" class="level2">
<h2 class="anchored" data-anchor-id="what-is-git">What is Git</h2>
<p>Git is a distributed version control system. It is a tool that tracks changes in files and directories. At user-defined snapshots in time, called commits, it records the changes made to the files and directories. As a consequence it is possible to search for changes in the repository across snapshots.</p>
<p>Along with <code>grep</code> and <code>find</code>, there are <code>git</code> specific tools for searching snapshots of the repo, commit messages and filtering by <code>date</code> and <code>author</code>, such as:</p>
<ul>
<li><code>git ls-files</code></li>
<li><code>git log</code></li>
<li><code>git grep</code></li>
</ul>
</section>
<section id="filename-in-git-repository" class="level2">
<h2 class="anchored" data-anchor-id="filename-in-git-repository">Filename in Git Repository</h2>
<p>The working tree is what you see when you list the files in your project’s directory that are being tracked. It’s the version of your project that you’re currently working on. The git checkout command is used to update the working directory with a specific commit, matching the snapshot recorded in the commit. Untracked files are not affected by git checkout.</p>
<p>The <code>git ls-files</code> command lists the files in the working tree that are being tracked by git. The filenames can be searched for a string using the <code>grep</code> command.</p>
<div id="cell-16" class="cell" data-execution_count="163">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>git ls<span class="op">-</span>files <span class="op">|</span> grep <span class="st">"test_sparse"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>test/utils/test_sparse.py</code></pre>
</div>
</div>
<p>If we want to log commit messages (including commit ids) where filenames contain the string <code>test_sparse</code> were modified, we can use the following command, truncating the output with pipe to <code>head</code>:</p>
<div id="cell-18" class="cell" data-execution_count="164">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">--</span><span class="bu">all</span> <span class="op">--</span> <span class="op">*</span>test_sparse<span class="op">*</span> <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>commit 62fa51e0000913e1b3023b817485d2b248322539
Author: Matthias Fey &lt;matthias.fey@tu-dortmund.de&gt;
Date:   Sun Dec 24 11:56:08 2023 +0100

    Accelerate concatenation of `torch.sparse` tensors (#8670)

    Fixes #8664

commit 1c89e751804d1eb2fb626dabc677198a1878c34d
Author: Matthias Fey &lt;matthias.fey@tu-dortmund.de&gt;
Date:   Wed Oct 4 09:59:36 2023 +0200

    Skip TorchScript bug for PyTorch &lt; 1.12 (#8123)

commit 51c50c2f9d3372de34f4ac3617f396384a36558c
Author: filipekstrm &lt;filip.ekstrom@hotmail.com&gt;
Date:   Tue Oct 3 20:39:04 2023 +0200

    Added `mask` argument to `dense_to_sparse` (#8117)
    </code></pre>
</div>
</div>
</section>
<section id="string-in-file-contents-of-git-repository" class="level2">
<h2 class="anchored" data-anchor-id="string-in-file-contents-of-git-repository">String in File Contents of Git Repository</h2>
<p>To search for a string inside file contents across commits, we can use the <code>git log</code> and <code>git grep</code> commands. The <code>git log</code> command lists the commits in reverse chronological order.</p>
<p>The flag <code>-S</code>, and <code>--all</code> are used to search for change in the number of occurences of the string in the repo across all branches and commits. (Again we’ll pipe to head to truncate the output.)</p>
<div id="cell-20" class="cell" data-execution_count="165">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">-</span>S <span class="st">"test_sparse"</span> <span class="op">--</span><span class="bu">all</span> <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>commit dba9659f6c4f29fd2be1f50b5ea12a29a926082f
Author: Matthias Fey &lt;matthias.fey@tu-dortmund.de&gt;
Date:   Thu Feb 29 14:04:19 2024 +0100

    Fix `EdgeIndex.resize_` linting issues (#8993)

commit 123e38ef6715f75ed9198d256cc2cb984b431630
Author: Poovaiah Palangappa &lt;98763718+pmpalang@users.noreply.github.com&gt;
Date:   Sun Feb 11 03:32:44 2024 -0800

    Example of a recommender system (#8546)

    Hi Everyone,

    I'm adding a recommender system example with the following salient
    features

    1. Dataset MovieLens – a heterogenous use case
    2. Demonstrates the use of edge based temporal sampling
    3. Visualization</code></pre>
</div>
</div>
<p>to be specific to a branch, replace –all with the branch name (<code>master</code> in this case)</p>
<div id="cell-22" class="cell" data-execution_count="166">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>git log master <span class="op">-</span>S <span class="st">"convert_coo_to_csr_indices"</span>  <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>If we just want commit hashes and filenames where a file was added (and has the string in its contents), we can use the <code>--name-only</code> flag, made pretty:</p>
<div id="cell-24" class="cell" data-execution_count="167">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>git log master <span class="op">-</span>S <span class="st">"test_sparse"</span> <span class="op">--</span>pretty<span class="op">=</span><span class="bu">format</span>:<span class="st">"%h"</span> <span class="op">--</span>name<span class="op">-</span>only <span class="op">--</span>diff<span class="op">-</span><span class="bu">filter</span><span class="op">=</span>A</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>801723efa
test/utils/test_cross_entropy.py

1dadc0705
torch_geometric/testing/asserts.py

2c01aa22c
test/utils/test_sparse.py</code></pre>
</div>
</div>
<p>With regular expression search use the flag <code>-G</code> ( <code>*</code> glob is not needed as it’s implied with regular expressions).</p>
<div id="cell-26" class="cell" data-execution_count="168">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">-</span>G <span class="st">"convert_coo_to_csr_indices"</span> <span class="op">--</span>pretty<span class="op">=</span><span class="bu">format</span>:<span class="st">"%h"</span> <span class="op">--</span>name<span class="op">-</span>only</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Nothing. It seems that the string <code>convert_coo_to_csr_indices</code> is not in the contents of any files in the repo.</p>
<div id="cell-28" class="cell" data-execution_count="169">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">-</span>G <span class="st">"coo_to_csr"</span> <span class="op">--</span>pretty<span class="op">=</span><span class="bu">format</span>:<span class="st">"%h"</span> <span class="op">--</span>name<span class="op">-</span>only <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>390942fc4
torch_geometric/data/edge_index.py

699120e25
torch_geometric/data/edge_index.py

a6f0f4947
torch_geometric/data/edge_index.py

cf786b735
torch_geometric/data/edge_index.py

b825dc637
torch_geometric/data/edge_index.py

b5ecfd9b4
torch_geometric/data/graph_store.py
torch_geometric/nn/conv/cugraph/base.py
torch_geometric/nn/conv/rgcn_conv.py
torch_geometric/nn/dense/linear.py</code></pre>
</div>
</div>
<p>Let’s try a few different strings.</p>
<div id="cell-30" class="cell" data-execution_count="170">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">-</span>G <span class="st">"convert_coo"</span> <span class="op">--</span>pretty<span class="op">=</span><span class="bu">format</span>:<span class="st">"%h"</span> <span class="op">--</span>name<span class="op">-</span>only</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-31" class="cell" data-execution_count="171">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">-</span>G <span class="st">"csr_indices"</span> <span class="op">--</span>pretty<span class="op">=</span><span class="bu">format</span>:<span class="st">"%h"</span> <span class="op">--</span>name<span class="op">-</span>only</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-32" class="cell" data-execution_count="172">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>git log master <span class="op">-</span>G<span class="st">"test_sparse"</span> <span class="op">--</span>pretty<span class="op">=</span><span class="bu">format</span>:<span class="st">"%h"</span> <span class="op">--</span>name<span class="op">-</span>only</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>dba9659f6
test/test_edge_index.py

123e38ef6
test/test_edge_index.py

23bbc128d
test/test_edge_index.py

ed9698d0b
torch_geometric/testing/asserts.py

1725f1436
test/utils/test_cross_entropy.py

801723efa
test/utils/test_cross_entropy.py

1dadc0705
torch_geometric/testing/asserts.py

7b4892781
test/nn/conv/test_gcn_conv.py

72e8ef33d
test/nn/conv/test_gcn_conv.py

93fab2e53
test/nn/conv/test_gcn_conv.py

d01ea9dab
test/utils/test_sparse.py

2c01aa22c
test/utils/test_sparse.py

eb4260ce0
torch_geometric/nn/functional/pool/voxel_pool_test.py

544f4ad0e
torch_geometric/nn/functional/pool/voxel_pool_test.py</code></pre>
</div>
</div>
</section>
<section id="filter-git-commit-messages-for-author-date-and-string" class="level2">
<h2 class="anchored" data-anchor-id="filter-git-commit-messages-for-author-date-and-string">Filter Git Commit Messages for Author, Date and String</h2>
<div id="cell-34" class="cell" data-execution_count="173">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">--</span>author<span class="op">=</span><span class="st">"ravkalia"</span>  <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>commit f0e4c829662df9eb67fd5c0abda002c9b7cd0afb
Author: Ravi Kalia &lt;ravkalia@gmail.com&gt;
Date:   Sun Mar 24 08:05:12 2024 -0500

    Replace `withCUDA` decorator: `withDevice` (#9082)

    Replace `withCUDA` for a `withDevice` decorator.

    Change variable name from devices to processors to reduce confusion
    against pytorch api (backends/devices) and reflect the hardware choices.

    Note that at this time:

    ## Hardware
    3 repertoires of hardware can be used to run pyTorch code:

    * CPU only
    * CPU and GPU
    * Unified Memory Single Chip
    </code></pre>
</div>
</div>
<div id="cell-35" class="cell" data-execution_count="174">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">--</span>author<span class="op">=</span><span class="st">"ravkalia"</span> <span class="op">--</span>since<span class="op">=</span><span class="st">"2022-01-01"</span> <span class="op">--</span>until<span class="op">=</span><span class="st">"2024-02-31"</span> <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>commit 25b2f208e671eeec285bfafa2e246ea0a234b312
Author: Ravi Kalia &lt;ravkalia@gmail.com&gt;
Date:   Wed Feb 21 11:11:33 2024 -0500

    docs: fix broken links to source of graph classification datasets (#8946)

    **Update Broken Dataset Links in Documentation**

    This PR addresses broken links in the documentation that pointed to the
    common benchmark datasets. The links were updated to point to the
    correct URL.

    Changes were made in the following files:

    1. `benchmark/kernel/README.md`
    2. `docs/source/get_started/introduction.rst`

    The specific changes are as follows:

    In `benchmark/kernel/README.md`:</code></pre>
</div>
</div>
<div id="cell-36" class="cell" data-execution_count="175">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">--</span>grep<span class="op">=</span><span class="st">"docs"</span>  <span class="op">--</span>since<span class="op">=</span><span class="st">"2022-01-01"</span> <span class="op">--</span>until<span class="op">=</span><span class="st">"2022-02-31"</span> <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>commit 24a185e7268f70ee549c7a424b9426b9a18b5706
Author: Ramona Bendias &lt;ramona.bendias@gmail.com&gt;
Date:   Mon Feb 21 13:03:52 2022 +0000

    Add general `Explainer` Class (#4090)

    * Add base Explainer

    * Update Explainer

    * Fix test

    * Clean code

    * Update test/nn/models/test_explainer.py

    Co-authored-by: Matthias Fey &lt;matthias.fey@tu-dortmund.de&gt;

    * Update torch_geometric/nn/models/explainer.py
    </code></pre>
</div>
</div>
<div id="cell-37" class="cell" data-execution_count="176">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">--</span>oneline <span class="op">--</span>grep<span class="op">=</span><span class="st">"docs"</span>  <span class="op">--</span>since<span class="op">=</span><span class="st">"2022-01-01"</span> <span class="op">--</span>until<span class="op">=</span><span class="st">"2022-02-31"</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>24a185e72 Add general `Explainer` Class (#4090)
6002170a5 Make models compatible to Captum (#3990)
14d588d4c Update attention.py (#4009)
50ff5e6d6 Add `full` extras to install command in contribution docs (#3991)
1e24b3a16 Refactor: `MLP` initialization (#3957)
3e4891be6 Doc improvements to set2set layers (#3889)
fac848c25 Let `TemporalData` inherit from `BaseData` and add docs (#3867)
0c29b0d5b Updated docstring for shape info - part 2 (#3739)</code></pre>
</div>
</div>
</section>
<section id="git-grep-vs-grep" class="level2">
<h2 class="anchored" data-anchor-id="git-grep-vs-grep">Git Grep vs Grep</h2>
<p>The main differences between <code>git grep</code> and <code>grep</code> are:</p>
<p><code>git grep</code> only searches through your tracked files, while <code>grep</code> can search through any files. <code>git grep</code> is aware of your Git repository structure and can search through old commits, branches, etc., while <code>grep</code> only searches through the current state of files.</p>
<p><code>git grep</code> is faster than <code>grep</code> when searching through a Git repository because it takes advantage of Git’s index data structure.</p>
<div id="cell-39" class="cell" data-execution_count="177">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>git grep <span class="st">"test_sparse"</span> <span class="op">&gt;</span> <span class="op">/</span>dev<span class="op">/</span>null</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 1.52 ms, sys: 4.44 ms, total: 5.96 ms
Wall time: 22.6 ms</code></pre>
</div>
</div>
<div id="cell-40" class="cell" data-execution_count="178">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>grep <span class="op">-</span>r <span class="st">"test_sparse"</span> . <span class="op">&gt;</span> <span class="op">/</span>dev<span class="op">/</span>null</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 1.94 ms, sys: 3.26 ms, total: 5.21 ms
Wall time: 346 ms</code></pre>
</div>
</div>
</section>
<section id="takeaways" class="level2">
<h2 class="anchored" data-anchor-id="takeaways">Takeaways</h2>
<p>There are many ways to search a repository, particularly a Git Repo. We outlined some use cases with examples for a “Unix-like” file directory and also a Git Repo.</p>
<p>In most cases use:</p>
<ul>
<li><p><code>git grep</code> for searching strings in the repository in the current working tree or a specific commit</p></li>
<li><p><code>git log</code> for searching across commits.</p></li>
</ul>
<p>There are many flags and options for these commands - some combinations which produce the same output. Be sure to check the documentation for more information.</p>
<p>For the strings we are after, the conclusion is:</p>
<ul>
<li><code>test_sparse</code> is in the filename <code>test_sparse.py</code> and in the contents of the file <code>test_sparse.py</code> in the repo.</li>
<li><code>convert_coo_to_csr_indices</code> is not in the contents of any files in the repo.</li>
<li>strings similar to <code>convert_coo_to_csr_indices</code> are available.</li>
</ul>
<p>The most promising output from the commands tested are:</p>
<div id="cell-42" class="cell" data-execution_count="179">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>grep <span class="op">-</span>rn . <span class="op">-</span>e <span class="st">"test_sparse"</span> <span class="op">||</span> echo <span class="st">"no match"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>./test/utils/test_cross_entropy.py:9:def test_sparse_cross_entropy_multiclass(with_edge_label_weight):
./test/utils/test_cross_entropy.py:32:def test_sparse_cross_entropy_multilabel(with_edge_label_weight):
./test/test_edge_index.py:102:def test_sparse_tensor(dtype, device):
./test/test_edge_index.py:992:def test_sparse_narrow(device):
./test/test_edge_index.py:1026:def test_sparse_resize(device):
./torch_geometric/testing/asserts.py:24:    test_sparse_layouts: Optional[List[Union[str, torch.layout]]] = None,
./torch_geometric/testing/asserts.py:49:        test_sparse_layouts (List[str or int], optional): The sparse layouts to
./torch_geometric/testing/asserts.py:62:    if test_sparse_layouts is None:
./torch_geometric/testing/asserts.py:63:        test_sparse_layouts = SPARSE_LAYOUTS
./torch_geometric/testing/asserts.py:74:    if len(test_sparse_layouts) &gt; 0 and sparse_size is None:
./torch_geometric/testing/asserts.py:75:        raise ValueError(f"Got sparse layouts {test_sparse_layouts}, but no "
./torch_geometric/testing/asserts.py:93:    for layout in (test_sparse_layouts or []):
Binary file ./.git/index matches</code></pre>
</div>
</div>
<div id="cell-43" class="cell" data-execution_count="180">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>grep <span class="op">-</span>rn . <span class="op">-</span>e <span class="st">"convert_coo_to_csr_indices"</span> <span class="op">||</span> echo <span class="st">"no match"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>no match</code></pre>
</div>
</div>
<div id="cell-44" class="cell" data-execution_count="181">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>git ls<span class="op">-</span>files <span class="op">|</span> grep <span class="st">"test_sparse"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>test/utils/test_sparse.py</code></pre>
</div>
</div>
<div id="cell-45" class="cell" data-execution_count="182">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">-</span>G <span class="st">"coo_to_csr"</span> <span class="op">--</span>pretty<span class="op">=</span><span class="bu">format</span>:<span class="st">"%h"</span> <span class="op">--</span>name<span class="op">-</span>only <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>390942fc4
torch_geometric/data/edge_index.py

699120e25
torch_geometric/data/edge_index.py

a6f0f4947
torch_geometric/data/edge_index.py

cf786b735
torch_geometric/data/edge_index.py

b825dc637
torch_geometric/data/edge_index.py

b5ecfd9b4
torch_geometric/data/graph_store.py
torch_geometric/nn/conv/cugraph/base.py
torch_geometric/nn/conv/rgcn_conv.py
torch_geometric/nn/dense/linear.py</code></pre>
</div>
</div>
<div id="cell-46" class="cell" data-execution_count="183">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>bash</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>git log <span class="op">--</span>pretty<span class="op">=</span><span class="bu">format</span>:<span class="st">"%h"</span> <span class="op">-</span>G <span class="st">"coo_to_csr"</span> <span class="op">--</span><span class="bu">all</span> <span class="op">|</span> <span class="cf">while</span> read commit<span class="op">;</span> do</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    echo <span class="st">"Commit: $commit"</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    git grep <span class="op">-</span>n <span class="st">"coo_to_csr"</span> $commit</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>done <span class="op">|</span> head <span class="op">-</span>n <span class="dv">20</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Commit: 390942fc4
390942fc4:torch_geometric/data/edge_index.py:344:        self._indptr = torch._convert_indices_from_coo_to_csr(
390942fc4:torch_geometric/data/edge_index.py:382:            rowptr = self._T_indptr = torch._convert_indices_from_coo_to_csr(
390942fc4:torch_geometric/data/edge_index.py:403:            colptr = self._T_indptr = torch._convert_indices_from_coo_to_csr(
390942fc4:torch_geometric/utils/sparse.py:480:    return torch._convert_indices_from_coo_to_csr(
Commit: 699120e25
699120e25:torch_geometric/data/edge_index.py:323:                self._rowptr = rowptr = torch._convert_indices_from_coo_to_csr(
699120e25:torch_geometric/data/edge_index.py:351:                self._rowptr = rowptr = torch._convert_indices_from_coo_to_csr(
699120e25:torch_geometric/data/edge_index.py:375:                self._colptr = colptr = torch._convert_indices_from_coo_to_csr(
699120e25:torch_geometric/data/edge_index.py:403:                self._colptr = colptr = torch._convert_indices_from_coo_to_csr(
699120e25:torch_geometric/utils/sparse.py:480:    return torch._convert_indices_from_coo_to_csr(
Commit: a6f0f4947
a6f0f4947:torch_geometric/data/edge_index.py:321:                self._rowptr = torch._convert_indices_from_coo_to_csr(
a6f0f4947:torch_geometric/data/edge_index.py:352:                self._rowptr = torch._convert_indices_from_coo_to_csr(
a6f0f4947:torch_geometric/data/edge_index.py:379:                self._colptr = torch._convert_indices_from_coo_to_csr(
a6f0f4947:torch_geometric/data/edge_index.py:410:                self._colptr = torch._convert_indices_from_coo_to_csr(
a6f0f4947:torch_geometric/utils/sparse.py:480:    return torch._convert_indices_from_coo_to_csr(
Commit: cf786b735
cf786b735:torch_geometric/data/edge_index.py:236:        self._rowptr = torch._convert_indices_from_coo_to_csr(
cf786b735:torch_geometric/data/edge_index.py:255:        self._colptr = torch._convert_indices_from_coo_to_csr(</code></pre>
</div>
</div>
<p>This is a good starting point for debugging the issues with the unit tests in the library. Useful and informative :=)</p>
<p>And finally some clean up:</p>
<div id="cell-48" class="cell" data-execution_count="189">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> shutil</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>shutil.rmtree(os.getcwd())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button,
        { trigger: "manual",
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined;
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            }
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          }
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.dev/project-delphi/ml-blog/blob/main/posts/git-search/index.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>
